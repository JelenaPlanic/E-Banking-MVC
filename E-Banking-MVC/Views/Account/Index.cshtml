@{
    Layout = null;
}
@model E_Banking_MVC.ViewModels.AccountAccountsViewModel
<html>
    <head>
        <title>Accounts</title>
        <script src="~/js/validation.js"></script>
        <style>
            .text-danger{
                color:red;
            }
        </style>
    </head>
    <body>
        <h1>List of Accounts</h1>
        <table border="1">
            <tr>
                <th>Number of Account</th>
                <th>Account Holder</th>
                <th>Total</th>
                <th>Online Banking</th>
                <th>Active</th>
            </tr>
        @foreach(Account account in Model.Accounts.Keys)
        {
            @if (account.IsActive)
            {
                <tr style="background-color:forestgreen">
                  <td>@account.Number</td>
                  <td>@account.Holder</td>
                  <td>@Model.Accounts[account]</td>
                  <td>@(account.HasOnlineBanking? "Yes" : "No")</td>
                  <td>Yes</td>
                  <td><a style="color:white">Open</a></td>
                    <td><a style="color:white" href="/Account/Edit?AccountId=@account.Id">Edit</a></td>
                    <td><a style="color:white" href="/Account/Delete?AccountId=@account.Id">Delete</a></td>
                    <td><a style="color:white" href="/Account/Deactivate?AccountId=@account.Id">Deactivate</a></td>

                </tr>
            }
            else
            {
                <tr style="background-color:red">
                    <td>@account.Number</td>
                    <td>@account.Holder</td>
                    <td>@Model.Accounts[account]</td>
                    <td>@(account.HasOnlineBanking ? "Yes" : "No")</td>
                    <td>No</td>
                    <td><a style="color:white">Open</a></td>
                    <td><a style="color:white" href="/Account/Edit?AccountId=@account.Id">Edit</a></td>
                    <td><a style="color:white" href="/Account/Delete?AccountId=@account.Id">Delete</a></td>
                    <td><a style="color:white" href="/Account/Activate?AccountId=@account.Id">Activate</a></td>
                </tr>
            }
        }
        </table>
        <br />
        <a href="/Account/Search">Search Accounts</a>
        <br />
        <h1>Add new Account</h1>
        <form method="post" action="/Account/Create" onsubmit="return validation()">
            <table>
                <tr>
                   <td>Account Holder</td>
                   <td><input type="text" name="account.Holder" value="@Model.Account.Holder" id="AccountHolderInput"  /></td>
                   <td>@Html.ValidationMessageFor(m => m.Account.Holder, "", new {@class = "text-danger"})</td>
                <td><span id="AccountHolderInputError" class="text-danger"></span></td>
                </tr>
                <tr>
                    <td>Account Number</td>
                    <td><input type="text" name="account.Number" value="@Model.Account.Number" id="AccountNumberInput" /></td>
                    <td>@Html.ValidationMessageFor(m => m.Account.Number,"", new{@class="text-danger"})</td>
                    <td><span id="AccountNumberInputError"></span></td>
                </tr>
                <tr>
                    <td>Online Banking</td>
                @if (Model.Account.HasOnlineBanking)
                {
                    <td><input type="checkbox" name="account.HasOnlineBanking" value="true" checked /></td>
                }
                else
                {
                    <td><input type="checkbox" name="account.HasOnlineBanking" value="true" /></td>
                }
            </tr>
                <tr>
                    <td>Active</td>
                @if (Model.Account.IsActive)
                {
                    <td><input type="checkbox" name="account.IsActive" value="true" checked /></td>
                }
                else
                {
                    <td><input type="checkbox" name="account.IsActive" value="true" /></td>
                }
            </tr>
                <tr>
                    <td colspan="2"> <input type="submit" value="Add new Account" /></td>
                </tr>
            </table>
        </form>
    </body>
</html>

